<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº§å“ç³»åˆ— - æ»‡è‰æº</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;700&family=Noto+Sans+SC:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --deep-green: #2D5016;
            --warm-beige: #F5F1E8;
            --amber: #D4A574;
            --ivory: #FFFEF7;
            --dark-brown: #8B4513;
        }
        
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: var(--ivory);
            color: var(--dark-brown);
            padding-bottom: 80px;
        }
        
        .serif-font {
            font-family: 'Noto Serif SC', serif;
        }
        
        .card-shadow {
            box-shadow: 0 8px 32px rgba(45, 80, 22, 0.1);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--deep-green), #3D6B1F);
            color: var(--ivory);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(45, 80, 22, 0.3);
        }
        
        .btn-secondary {
            background: var(--amber);
            color: var(--dark-brown);
            transition: all 0.3s ease;
        }
        
        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(212, 165, 116, 0.4);
        }
        
        .filter-btn {
            padding: 8px 16px;
            border: 2px solid var(--warm-beige);
            background: white;
            border-radius: 20px;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .filter-btn.active {
            border-color: var(--deep-green);
            background: var(--deep-green);
            color: white;
        }
        
        .product-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            border-color: var(--amber);
        }
        
        .product-card.selected {
            border-color: var(--deep-green);
            box-shadow: 0 8px 32px rgba(45, 80, 22, 0.2);
        }
        
        .compare-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: var(--deep-green);
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }
        
        .floating-compare {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--deep-green);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 8px 25px rgba(45, 80, 22, 0.3);
            transition: all 0.3s ease;
        }
        
        .floating-compare:hover {
            transform: translateX(-50%) translateY(-2px);
        }
        
        .nav-bottom {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 254, 247, 0.95);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(45, 80, 22, 0.1);
            z-index: 1000;
            padding-bottom: env(safe-area-inset-bottom);
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px;
            color: var(--dark-brown);
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 12px;
        }
        
        .nav-item.active {
            color: var(--deep-green);
        }
        
        .nav-item:hover {
            color: var(--deep-green);
            transform: translateY(-2px);
        }
        
        .nav-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }
        
        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease;
        }
        
        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .modal-content {
            background: white;
            border-radius: 16px;
            max-width: 400px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .price-range {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: var(--warm-beige);
            outline: none;
        }
        
        .price-range::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--deep-green);
            cursor: pointer;
        }
        
        .price-range::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--deep-green);
            cursor: pointer;
            border: none;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <h1 class="serif-font text-xl font-bold text-gray-800">äº§å“ç³»åˆ—</h1>
                <div class="flex items-center space-x-4">
                    <button onclick="toggleFilter()" class="text-gray-600 text-sm">
                        <span class="mr-1">ğŸ”</span>
                        ç­›é€‰
                    </button>
                    <button onclick="toggleSort()" class="text-gray-600 text-sm">
                        <span class="mr-1">ğŸ“Š</span>
                        æ’åº
                    </button>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Filter Bar -->
    <section class="bg-white border-b px-4 py-3" id="filter-bar">
        <div class="container mx-auto">
            <div class="flex items-center space-x-2 overflow-x-auto pb-2">
                <button class="filter-btn active" onclick="filterProducts('all')">å…¨éƒ¨</button>
                <button class="filter-btn" onclick="filterProducts('anti-dandruff')">å»å±‘</button>
                <button class="filter-btn" onclick="filterProducts('nourishing')">æ»‹å…»</button>
                <button class="filter-btn" onclick="filterProducts('repair')">ä¿®å¤</button>
                <button class="filter-btn" onclick="filterProducts('oil-control')">æ§æ²¹</button>
            </div>
        </div>
    </section>
    
    <!-- Products Grid -->
    <section class="py-6 px-4">
        <div class="container mx-auto">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="products-grid">
                <!-- Product 1 -->
                <div class="product-card card-shadow relative" data-category="anti-dandruff" data-price="168">
                    <div class="relative">
                        <img src="hero-product.png" alt="æ»‡è‰æºç‰¹æ•ˆå»å±‘æ´—å‘æ°´" class="w-full h-48 object-cover">
                        <button class="absolute top-2 left-2 w-8 h-8 bg-white bg-opacity-80 rounded-full flex items-center justify-center text-sm" onclick="toggleCompare('product1')">
                            <span id="compare-icon-product1">+</span>
                        </button>
                    </div>
                    <div class="p-4">
                        <h3 class="serif-font text-lg font-bold text-gray-800 mb-2">ç‰¹æ•ˆå»å±‘æ´—å‘æ°´</h3>
                        <p class="text-gray-600 text-sm mb-3">è•´å«äº‘å—æ™®æ´±èŒ¶æå–ç‰©ï¼Œæ·±å±‚æ¸…æ´å¤´çš®ï¼Œæœ‰æ•ˆå»é™¤å¤´å±‘ï¼Œæ”¹å–„å¤´çš®ç¯å¢ƒ</p>
                        <div class="flex items-center mb-3">
                            <div class="flex text-amber-400 text-sm mr-2">
                                â˜…â˜…â˜…â˜…â˜…
                            </div>
                            <span class="text-xs text-gray-500">(128æ¡è¯„ä»·)</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <div>
                                <span class="text-xl font-bold text-amber-600">Â¥168</span>
                                <span class="text-sm text-gray-500 line-through ml-2">Â¥198</span>
                            </div>
                            <button class="btn-primary px-4 py-2 rounded-lg text-sm" onclick="addToCart('product1')">
                                åŠ å…¥è´­ç‰©è½¦
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Product 2 -->
                <div class="product-card card-shadow relative" data-category="nourishing repair" data-price="198">
                    <div class="relative">
                        <img src="product-lifestyle.png" alt="æ»‡è‰æºæ»‹å…»ä¿®å¤æ´—å‘æ°´" class="w-full h-48 object-cover">
                        <button class="absolute top-2 left-2 w-8 h-8 bg-white bg-opacity-80 rounded-full flex items-center justify-center text-sm" onclick="toggleCompare('product2')">
                            <span id="compare-icon-product2">+</span>
                        </button>
                    </div>
                    <div class="p-4">
                        <h3 class="serif-font text-lg font-bold text-gray-800 mb-2">æ»‹å…»ä¿®å¤æ´—å‘æ°´</h3>
                        <p class="text-gray-600 text-sm mb-3">æ»‡çº¢ç«ç‘°ç²¾æ²¹é…æ–¹ï¼Œæ·±å±‚æ»‹å…»ï¼Œä¿®å¤å—æŸå‘è´¨ï¼Œè®©ç§€å‘é‡ç°å…‰æ³½</p>
                        <div class="flex items-center mb-3">
                            <div class="flex text-amber-400 text-sm mr-2">
                                â˜…â˜…â˜…â˜…â˜…
                            </div>
                            <span class="text-xs text-gray-500">(96æ¡è¯„ä»·)</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <div>
                                <span class="text-xl font-bold text-amber-600">Â¥198</span>
                                <span class="text-sm text-gray-500 line-through ml-2">Â¥238</span>
                            </div>
                            <button class="btn-primary px-4 py-2 rounded-lg text-sm" onclick="addToCart('product2')">
                                åŠ å…¥è´­ç‰©è½¦
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Product 3 -->
                <div class="product-card card-shadow relative" data-category="oil-control" data-price="188">
                    <div class="relative">
                        <img src="product-line.png" alt="æ»‡è‰æºæ§æ²¹å¹³è¡¡æ´—å‘æ°´" class="w-full h-48 object-cover">
                        <button class="absolute top-2 left-2 w-8 h-8 bg-white bg-opacity-80 rounded-full flex items-center justify-center text-sm" onclick="toggleCompare('product3')">
                            <span id="compare-icon-product3">+</span>
                        </button>
                    </div>
                    <div class="p-4">
                        <h3 class="serif-font text-lg font-bold text-gray-800 mb-2">æ§æ²¹å¹³è¡¡æ´—å‘æ°´</h3>
                        <p class="text-gray-600 text-sm mb-3">é«˜åŸè–°è¡£è‰ç²¾åï¼Œè°ƒèŠ‚æ²¹è„‚åˆ†æ³Œï¼Œä¿æŒå¤´çš®æ¸…çˆ½ï¼ŒæŒä¹…æ§æ²¹</p>
                        <div class="flex items-center mb-3">
                            <div class="flex text-amber-400 text-sm mr-2">
                                â˜…â˜…â˜…â˜…â˜†
                            </div>
                            <span class="text-xs text-gray-500">(85æ¡è¯„ä»·)</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <div>
                                <span class="text-xl font-bold text-amber-600">Â¥188</span>
                                <span class="text-sm text-gray-500 line-through ml-2">Â¥218</span>
                            </div>
                            <button class="btn-primary px-4 py-2 rounded-lg text-sm" onclick="addToCart('product3')">
                                åŠ å…¥è´­ç‰©è½¦
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Product 4 -->
                <div class="product-card card-shadow relative" data-category="nourishing" data-price="228">
                    <div class="relative">
                        <img src="herbs-closeup.png" alt="æ»‡è‰æºå¼ºéŸ§ç”Ÿå‘æ´—å‘æ°´" class="w-full h-48 object-cover">
                        <button class="absolute top-2 left-2 w-8 h-8 bg-white bg-opacity-80 rounded-full flex items-center justify-center text-sm" onclick="toggleCompare('product4')">
                            <span id="compare-icon-product4">+</span>
                        </button>
                    </div>
                    <div class="p-4">
                        <h3 class="serif-font text-lg font-bold text-gray-800 mb-2">å¼ºéŸ§ç”Ÿå‘æ´—å‘æ°´</h3>
                        <p class="text-gray-600 text-sm mb-3">é‡ç”Ÿä½•é¦–ä¹Œç²¾åï¼Œå¼ºéŸ§å‘æ ¹ï¼Œä¿ƒè¿›å¤´å‘ç”Ÿé•¿ï¼Œæ”¹å–„è„±å‘é—®é¢˜</p>
                        <div class="flex items-center mb-3">
                            <div class="flex text-amber-400 text-sm mr-2">
                                â˜…â˜…â˜…â˜…â˜…
                            </div>
                            <span class="text-xs text-gray-500">(156æ¡è¯„ä»·)</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <div>
                                <span class="text-xl font-bold text-amber-600">Â¥228</span>
                                <span class="text-sm text-gray-500 line-through ml-2">Â¥268</span>
                            </div>
                            <button class="btn-primary px-4 py-2 rounded-lg text-sm" onclick="addToCart('product4')">
                                åŠ å…¥è´­ç‰©è½¦
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Product 5 -->
                <div class="product-card card-shadow relative" data-category="repair" data-price="258">
                    <div class="relative">
                        <img src="hero-product.png" alt="æ»‡è‰æºå¯†é›†ä¿®æŠ¤å‘è†œ" class="w-full h-48 object-cover">
                        <button class="absolute top-2 left-2 w-8 h-8 bg-white bg-opacity-80 rounded-full flex items-center justify-center text-sm" onclick="toggleCompare('product5')">
                            <span id="compare-icon-product5">+</span>
                        </button>
                    </div>
                    <div class="p-4">
                        <h3 class="serif-font text-lg font-bold text-gray-800 mb-2">å¯†é›†ä¿®æŠ¤å‘è†œ</h3>
                        <p class="text-gray-600 text-sm mb-3">å¤šé‡è‰æœ¬ç²¾åé…æ–¹ï¼Œæ·±å±‚ä¿®å¤å—æŸå‘è´¨ï¼Œè®©ç§€å‘é‡ç°å¥åº·å…‰æ³½</p>
                        <div class="flex items-center mb-3">
                            <div class="flex text-amber-400 text-sm mr-2">
                                â˜…â˜…â˜…â˜…â˜…
                            </div>
                            <span class="text-xs text-gray-500">(203æ¡è¯„ä»·)</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <div>
                                <span class="text-xl font-bold text-amber-600">Â¥258</span>
                                <span class="text-sm text-gray-500 line-through ml-2">Â¥298</span>
                            </div>
                            <button class="btn-primary px-4 py-2 rounded-lg text-sm" onclick="addToCart('product5')">
                                åŠ å…¥è´­ç‰©è½¦
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Product 6 -->
                <div class="product-card card-shadow relative" data-category="anti-dandruff oil-control" data-price="178">
                    <div class="relative">
                        <img src="product-lifestyle.png" alt="æ»‡è‰æºæ¸…çˆ½æ§æ²¹æ´—å‘æ°´" class="w-full h-48 object-cover">
                        <button class="absolute top-2 left-2 w-8 h-8 bg-white bg-opacity-80 rounded-full flex items-center justify-center text-sm" onclick="toggleCompare('product6')">
                            <span id="compare-icon-product6">+</span>
                        </button>
                    </div>
                    <div class="p-4">
                        <h3 class="serif-font text-lg font-bold text-gray-800 mb-2">æ¸…çˆ½æ§æ²¹æ´—å‘æ°´</h3>
                        <p class="text-gray-600 text-sm mb-3">èŒ¶æ ‘ç²¾æ²¹é…æ–¹ï¼Œæ·±å±‚æ¸…æ´ï¼Œæœ‰æ•ˆæ§åˆ¶æ²¹è„‚åˆ†æ³Œï¼ŒæŒä¹…æ¸…çˆ½</p>
                        <div class="flex items-center mb-3">
                            <div class="flex text-amber-400 text-sm mr-2">
                                â˜…â˜…â˜…â˜…â˜†
                            </div>
                            <span class="text-xs text-gray-500">(74æ¡è¯„ä»·)</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <div>
                                <span class="text-xl font-bold text-amber-600">Â¥178</span>
                                <span class="text-sm text-gray-500 line-through ml-2">Â¥208</span>
                            </div>
                            <button class="btn-primary px-4 py-2 rounded-lg text-sm" onclick="addToCart('product6')">
                                åŠ å…¥è´­ç‰©è½¦
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Floating Compare Button -->
    <div class="floating-compare" id="compare-btn" onclick="showCompareModal()" style="display: none;">
        å¯¹æ¯”äº§å“ (<span id="compare-count">0</span>)
    </div>
    
    <!-- Compare Modal -->
    <div class="modal" id="compare-modal" style="display: none;">
        <div class="modal-content">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="serif-font text-xl font-bold">äº§å“å¯¹æ¯”</h3>
                    <button onclick="closeCompareModal()" class="text-gray-500 text-2xl">&times;</button>
                </div>
                <div id="compare-content">
                    <!-- å¯¹æ¯”å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Filter Modal -->
    <div class="modal" id="filter-modal" style="display: none;">
        <div class="modal-content">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="serif-font text-xl font-bold">ç­›é€‰äº§å“</h3>
                    <button onclick="closeFilterModal()" class="text-gray-500 text-2xl">&times;</button>
                </div>
                
                <div class="space-y-6">
                    <div>
                        <h4 class="font-medium mb-3">åŠŸæ•ˆåˆ†ç±»</h4>
                        <div class="flex flex-wrap gap-2">
                            <button class="filter-btn active" onclick="toggleFilterOption(this, 'all')">å…¨éƒ¨</button>
                            <button class="filter-btn" onclick="toggleFilterOption(this, 'anti-dandruff')">å»å±‘</button>
                            <button class="filter-btn" onclick="toggleFilterOption(this, 'nourishing')">æ»‹å…»</button>
                            <button class="filter-btn" onclick="toggleFilterOption(this, 'repair')">ä¿®å¤</button>
                            <button class="filter-btn" onclick="toggleFilterOption(this, 'oil-control')">æ§æ²¹</button>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="font-medium mb-3">ä»·æ ¼åŒºé—´</h4>
                        <div class="px-2">
                            <input type="range" min="100" max="300" value="300" class="price-range" id="price-range" oninput="updatePriceFilter(this.value)">
                            <div class="flex justify-between text-sm text-gray-600 mt-2">
                                <span>Â¥100</span>
                                <span id="price-value">Â¥300</span>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="font-medium mb-3">ä¸»è¦æˆåˆ†</h4>
                        <div class="flex flex-wrap gap-2">
                            <button class="filter-btn" onclick="toggleFilterOption(this, 'tea')">æ™®æ´±èŒ¶</button>
                            <button class="filter-btn" onclick="toggleFilterOption(this, 'rose')">æ»‡çº¢ç«ç‘°</button>
                            <button class="filter-btn" onclick="toggleFilterOption(this, 'lavender')">è–°è¡£è‰</button>
                            <button class="filter-btn" onclick="toggleFilterOption(this, 'heshouwu')">ä½•é¦–ä¹Œ</button>
                        </div>
                    </div>
                </div>
                
                <div class="flex space-x-3 mt-8">
                    <button class="flex-1 btn-secondary py-3 rounded-lg font-medium" onclick="resetFilter()">
                        é‡ç½®
                    </button>
                    <button class="flex-1 btn-primary py-3 rounded-lg font-medium" onclick="applyFilter()">
                        åº”ç”¨ç­›é€‰
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Sort Modal -->
    <div class="modal" id="sort-modal" style="display: none;">
        <div class="modal-content">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="serif-font text-xl font-bold">æ’åºæ–¹å¼</h3>
                    <button onclick="closeSortModal()" class="text-gray-500 text-2xl">&times;</button>
                </div>
                
                <div class="space-y-3">
                    <button class="w-full text-left p-3 rounded-lg border-2 border-transparent hover:border-amber-400 transition-all" onclick="sortProducts('default')">
                        <div class="font-medium">é»˜è®¤æ’åº</div>
                        <div class="text-sm text-gray-600">æŒ‰æ¨èç¨‹åº¦æ’åº</div>
                    </button>
                    <button class="w-full text-left p-3 rounded-lg border-2 border-transparent hover:border-amber-400 transition-all" onclick="sortProducts('price-low')">
                        <div class="font-medium">ä»·æ ¼ä»ä½åˆ°é«˜</div>
                        <div class="text-sm text-gray-600">æŒ‰ä»·æ ¼å‡åºæ’åˆ—</div>
                    </button>
                    <button class="w-full text-left p-3 rounded-lg border-2 border-transparent hover:border-amber-400 transition-all" onclick="sortProducts('price-high')">
                        <div class="font-medium">ä»·æ ¼ä»é«˜åˆ°ä½</div>
                        <div class="text-sm text-gray-600">æŒ‰ä»·æ ¼é™åºæ’åˆ—</div>
                    </button>
                    <button class="w-full text-left p-3 rounded-lg border-2 border-transparent hover:border-amber-400 transition-all" onclick="sortProducts('rating')">
                        <div class="font-medium">è¯„åˆ†æ’åº</div>
                        <div class="text-sm text-gray-600">æŒ‰ç”¨æˆ·è¯„ä»·æ’åº</div>
                    </button>
                    <button class="w-full text-left p-3 rounded-lg border-2 border-transparent hover:border-amber-400 transition-all" onclick="sortProducts('popular')">
                        <div class="font-medium">çƒ­é—¨æ’åº</div>
                        <div class="text-sm text-gray-600">æŒ‰é”€é‡æ’åº</div>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bottom Navigation -->
    <nav class="nav-bottom">
        <div class="flex justify-around">
            <a href="index.html" class="nav-item">
                <span class="nav-icon">ğŸ </span>
                <span>é¦–é¡µ</span>
            </a>
            <a href="products.html" class="nav-item active">
                <span class="nav-icon">ğŸ›ï¸</span>
                <span>äº§å“</span>
            </a>
            <a href="about.html" class="nav-item">
                <span class="nav-icon">ğŸ“–</span>
                <span>å…³äº</span>
            </a>
            <a href="contact.html" class="nav-item">
                <span class="nav-icon">ğŸ“</span>
                <span>è”ç³»</span>
            </a>
        </div>
    </nav>
    
    <script>
        // äº§å“æ•°æ®
        const allProducts = [
            {
                id: 'product1',
                name: 'ç‰¹æ•ˆå»å±‘æ´—å‘æ°´',
                price: 168,
                originalPrice: 198,
                category: 'anti-dandruff',
                rating: 5,
                reviews: 128,
                image: 'hero-product.png',
                description: 'è•´å«äº‘å—æ™®æ´±èŒ¶æå–ç‰©ï¼Œæ·±å±‚æ¸…æ´å¤´çš®ï¼Œæœ‰æ•ˆå»é™¤å¤´å±‘ï¼Œæ”¹å–„å¤´çš®ç¯å¢ƒ',
                ingredients: ['tea', 'lavender']
            },
            {
                id: 'product2',
                name: 'æ»‹å…»ä¿®å¤æ´—å‘æ°´',
                price: 198,
                originalPrice: 238,
                category: 'nourishing repair',
                rating: 5,
                reviews: 96,
                image: 'product-lifestyle.png',
                description: 'æ»‡çº¢ç«ç‘°ç²¾æ²¹é…æ–¹ï¼Œæ·±å±‚æ»‹å…»ï¼Œä¿®å¤å—æŸå‘è´¨ï¼Œè®©ç§€å‘é‡ç°å…‰æ³½',
                ingredients: ['rose', 'heshouwu']
            },
            {
                id: 'product3',
                name: 'æ§æ²¹å¹³è¡¡æ´—å‘æ°´',
                price: 188,
                originalPrice: 218,
                category: 'oil-control',
                rating: 4,
                reviews: 85,
                image: 'product-line.png',
                description: 'é«˜åŸè–°è¡£è‰ç²¾åï¼Œè°ƒèŠ‚æ²¹è„‚åˆ†æ³Œï¼Œä¿æŒå¤´çš®æ¸…çˆ½ï¼ŒæŒä¹…æ§æ²¹',
                ingredients: ['lavender', 'tea']
            },
            {
                id: 'product4',
                name: 'å¼ºéŸ§ç”Ÿå‘æ´—å‘æ°´',
                price: 228,
                originalPrice: 268,
                category: 'nourishing',
                rating: 5,
                reviews: 156,
                image: 'herbs-closeup.png',
                description: 'é‡ç”Ÿä½•é¦–ä¹Œç²¾åï¼Œå¼ºéŸ§å‘æ ¹ï¼Œä¿ƒè¿›å¤´å‘ç”Ÿé•¿ï¼Œæ”¹å–„è„±å‘é—®é¢˜',
                ingredients: ['heshouwu', 'rose']
            },
            {
                id: 'product5',
                name: 'å¯†é›†ä¿®æŠ¤å‘è†œ',
                price: 258,
                originalPrice: 298,
                category: 'repair',
                rating: 5,
                reviews: 203,
                image: 'hero-product.png',
                description: 'å¤šé‡è‰æœ¬ç²¾åé…æ–¹ï¼Œæ·±å±‚ä¿®å¤å—æŸå‘è´¨ï¼Œè®©ç§€å‘é‡ç°å¥åº·å…‰æ³½',
                ingredients: ['rose', 'lavender', 'heshouwu']
            },
            {
                id: 'product6',
                name: 'æ¸…çˆ½æ§æ²¹æ´—å‘æ°´',
                price: 178,
                originalPrice: 208,
                category: 'anti-dandruff oil-control',
                rating: 4,
                reviews: 74,
                image: 'product-lifestyle.png',
                description: 'èŒ¶æ ‘ç²¾æ²¹é…æ–¹ï¼Œæ·±å±‚æ¸…æ´ï¼Œæœ‰æ•ˆæ§åˆ¶æ²¹è„‚åˆ†æ³Œï¼ŒæŒä¹…æ¸…çˆ½',
                ingredients: ['tea', 'lavender']
            }
        ];
        
        // å…¨å±€å˜é‡
        let compareList = [];
        let currentFilter = 'all';
        let currentSort = 'default';
        let cart = JSON.parse(localStorage.getItem('dianchaoyuan_cart') || '[]');
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializeScrollAnimations();
            updateCartUI();
        });
        
        // åˆå§‹åŒ–æ»šåŠ¨åŠ¨ç”»
        function initializeScrollAnimations() {
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.fade-in').forEach(el => {
                observer.observe(el);
            });
        }
        
        // ç­›é€‰åŠŸèƒ½
        function filterProducts(category) {
            currentFilter = category;
            
            // æ›´æ–°ç­›é€‰æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // ç­›é€‰äº§å“
            const products = document.querySelectorAll('.product-card');
            products.forEach(product => {
                const productCategory = product.dataset.category;
                if (category === 'all' || productCategory.includes(category)) {
                    product.style.display = 'block';
                    anime({
                        targets: product,
                        opacity: [0, 1],
                        translateY: [20, 0],
                        duration: 300,
                        easing: 'easeOutQuad'
                    });
                } else {
                    product.style.display = 'none';
                }
            });
        }
        
        // æ’åºåŠŸèƒ½
        function sortProducts(sortType) {
            currentSort = sortType;
            closeSortModal();
            
            const productsGrid = document.getElementById('products-grid');
            const products = Array.from(productsGrid.children);
            
            products.sort((a, b) => {
                switch(sortType) {
                    case 'price-low':
                        return parseInt(a.dataset.price) - parseInt(b.dataset.price);
                    case 'price-high':
                        return parseInt(b.dataset.price) - parseInt(a.dataset.price);
                    case 'rating':
                        return parseInt(b.dataset.rating) - parseInt(a.dataset.rating);
                    case 'popular':
                        return parseInt(b.dataset.reviews) - parseInt(a.dataset.reviews);
                    default:
                        return 0;
                }
            });
            
            // é‡æ–°æ’åˆ—DOM
            products.forEach(product => {
                productsGrid.appendChild(product);
            });
            
            // æ·»åŠ åŠ¨ç”»
            anime({
                targets: '.product-card',
                opacity: [0, 1],
                translateY: [20, 0],
                duration: 400,
                delay: anime.stagger(100),
                easing: 'easeOutQuad'
            });
        }
        
        // å¯¹æ¯”åŠŸèƒ½
        function toggleCompare(productId) {
            const index = compareList.indexOf(productId);
            const icon = document.getElementById(`compare-icon-${productId}`);
            const card = document.querySelector(`[data-category]`).closest('.product-card');
            
            if (index > -1) {
                // ç§»é™¤å¯¹æ¯”
                compareList.splice(index, 1);
                icon.textContent = '+';
                card.classList.remove('selected');
            } else {
                // æ·»åŠ å¯¹æ¯”
                if (compareList.length >= 3) {
                    showNotification('æœ€å¤šåªèƒ½å¯¹æ¯”3ä¸ªäº§å“');
                    return;
                }
                compareList.push(productId);
                icon.textContent = 'âœ“';
                card.classList.add('selected');
            }
            
            updateCompareButton();
        }
        
        function updateCompareButton() {
            const btn = document.getElementById('compare-btn');
            const count = document.getElementById('compare-count');
            
            if (compareList.length > 0) {
                btn.style.display = 'block';
                count.textContent = compareList.length;
            } else {
                btn.style.display = 'none';
            }
        }
        
        function showCompareModal() {
            if (compareList.length < 2) {
                showNotification('è‡³å°‘é€‰æ‹©2ä¸ªäº§å“è¿›è¡Œå¯¹æ¯”');
                return;
            }
            
            const modal = document.getElementById('compare-modal');
            const content = document.getElementById('compare-content');
            
            // ç”Ÿæˆå¯¹æ¯”å†…å®¹
            let html = '<div class="overflow-x-auto"><table class="w-full text-sm">';
            html += '<thead><tr><th class="text-left p-2">äº§å“</th>';
            
            compareList.forEach(productId => {
                const product = allProducts.find(p => p.id === productId);
                html += `<th class="text-center p-2">${product.name}</th>`;
            });
            html += '</tr></thead><tbody>';
            
            // å¯¹æ¯”é¡¹ç›®
            const compareItems = [
                { key: 'price', label: 'ä»·æ ¼', format: (val) => `Â¥${val}` },
                { key: 'rating', label: 'è¯„åˆ†', format: (val) => 'â˜…'.repeat(val) },
                { key: 'reviews', label: 'è¯„ä»·æ•°', format: (val) => `${val}æ¡` },
                { key: 'category', label: 'åŠŸæ•ˆ', format: (val) => val.split(' ').map(c => getCategoryName(c)).join('ã€') }
            ];
            
            compareItems.forEach(item => {
                html += `<tr class="border-t"><td class="p-2 font-medium">${item.label}</td>`;
                compareList.forEach(productId => {
                    const product = allProducts.find(p => p.id === productId);
                    html += `<td class="text-center p-2">${item.format(product[item.key])}</td>`;
                });
                html += '</tr>';
            });
            
            html += '</tbody></table></div>';
            
            content.innerHTML = html;
            modal.style.display = 'flex';
            
            anime({
                targets: modal.querySelector('.modal-content'),
                scale: [0.8, 1],
                opacity: [0, 1],
                duration: 300,
                easing: 'easeOutQuad'
            });
        }
        
        function closeCompareModal() {
            const modal = document.getElementById('compare-modal');
            anime({
                targets: modal.querySelector('.modal-content'),
                scale: [1, 0.8],
                opacity: [1, 0],
                duration: 300,
                easing: 'easeInQuad',
                complete: () => {
                    modal.style.display = 'none';
                }
            });
        }
        
        function getCategoryName(category) {
            const names = {
                'anti-dandruff': 'å»å±‘',
                'nourishing': 'æ»‹å…»',
                'repair': 'ä¿®å¤',
                'oil-control': 'æ§æ²¹'
            };
            return names[category] || category;
        }
        
        // æ¨¡æ€æ¡†æ§åˆ¶
        function toggleFilter() {
            document.getElementById('filter-modal').style.display = 'flex';
        }
        
        function closeFilterModal() {
            document.getElementById('filter-modal').style.display = 'none';
        }
        
        function toggleSort() {
            document.getElementById('sort-modal').style.display = 'flex';
        }
        
        function closeSortModal() {
            document.getElementById('sort-modal').style.display = 'none';
        }
        
        // ç­›é€‰é€‰é¡¹
        function toggleFilterOption(btn, value) {
            btn.classList.toggle('active');
        }
        
        function updatePriceFilter(value) {
            document.getElementById('price-value').textContent = `Â¥${value}`;
        }
        
        function resetFilter() {
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector('.filter-btn').classList.add('active');
            document.getElementById('price-range').value = 300;
            document.getElementById('price-value').textContent = 'Â¥300';
        }
        
        function applyFilter() {
            closeFilterModal();
            showNotification('ç­›é€‰æ¡ä»¶å·²åº”ç”¨');
        }
        
        // è´­ç‰©è½¦åŠŸèƒ½
        function addToCart(productId) {
            const product = allProducts.find(p => p.id === productId);
            if (!product) return;
            
            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    id: productId,
                    name: product.name,
                    price: product.price,
                    image: product.image,
                    quantity: 1
                });
            }
            
            updateCartUI();
            saveCartToStorage();
            showNotification('å·²æ·»åŠ åˆ°è´­ç‰©è½¦');
        }
        
        function updateCartUI() {
            // è¿™é‡Œå¯ä»¥æ·»åŠ è´­ç‰©è½¦UIæ›´æ–°é€»è¾‘
        }
        
        function saveCartToStorage() {
            localStorage.setItem('dianchaoyuan_cart', JSON.stringify(cart));
        }
        
        // é€šçŸ¥åŠŸèƒ½
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            anime({
                targets: notification,
                translateY: [-50, 0],
                opacity: [0, 1],
                duration: 300,
                easing: 'easeOutQuad'
            });
            
            setTimeout(() => {
                anime({
                    targets: notification,
                    translateY: [0, -50],
                    opacity: [1, 0],
                    duration: 300,
                    easing: 'easeInQuad',
                    complete: () => {
                        document.body.removeChild(notification);
                    }
                });
            }, 3000);
        }
        
        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.style.display = 'none';
            }
        });
    </script>
</body>
</html>